#+TITLE: TODO
#+DESCRIPTION: Open tasks for the emacs-container project

* Tasks
** TODO Wayland-aware =just browse= — open Chromium on host display
   Branch: =feat/wayland-browse= (2 commits, reviewed, not merged).
   When =WAYLAND_DISPLAY= is set, opens system Chromium with =--ozone-platform=wayland=.
   Update behavior: stop auto URL copy on =jolo up/create=. =just browse= should
   open Chromium on Wayland; clipboard copy should be explicit/opt-in.
   Falls back to clipboard-only or URL print without Wayland.
   Also strips =--headless= from Playwright MCP config on Wayland.
** TODO Add Phoenix LiveView scaffold support (Elixir)
   Include dev-mode LiveView hot reload and browser live reload defaults.
   Update =Containerfile= to include Elixir/Erlang/Phoenix tooling needed by scaffolded projects.
** TODO Investigate network egress monitoring for devcontainers
   Log outbound connections from agent containers for visibility without blocking.
   Not urgent — current rootless Podman isolation is strong. This is about
   observability, not enforcement. Options to research:
   - Podman =--log-driver= with network event logging
   - Lightweight transparent proxy (mitmproxy, squid) logging connections
   - eBPF-based connection tracking (=bpftrace=, =cilium=)
   - Simple =ss= / =conntrack= polling from host
   Goal: after-the-fact audit trail, not real-time blocking.
** TODO Use scoped GitHub tokens per project
   Replace broad =GH_TOKEN= with fine-grained personal access tokens
   scoped to specific repos. Reduces blast radius if a token is exfiltrated.
   GitHub fine-grained tokens support per-repo permissions since 2023.
** TODO Add ntfy desktop notifications on Linux
   Install =ntfysh-bin= (AUR), configure =~/.config/ntfy/client.yml= to subscribe
   to the =jolo= topic and pipe to =notify-send=, enable =ntfy-client= user service.
   #+begin_src yaml
   subscribe:
     - topic: jolo
       command: 'notify-send -a ntfy "$t" "$m"'
   #+end_src
   #+begin_example
   yay -S ntfysh-bin
   systemctl --user enable --now ntfy-client
   #+end_example
** TODO Research TTS — audio notifications via Kokoro
   :PROPERTIES:
   :BRANCH: feat/research-tts
   :END:

   When =jolo research= completes, generate an mp3 of the full org report via
   Kokoro TTS and attach it to the ntfy notification. Tap play on the phone.

   Code on =feat/research-tts= branch (1 commit ahead of main). Needs image
   rebuild + live testing with Kokoro at =berghome.ts.glvortex.net:4014=.

*** Verification
    1. Rebuild image, restart container
    2. =export KOKORO_URL=http://berghome.ts.glvortex.net:4014=
    3. =jolo research "what is an apple"=
    4. Phone: text notification (instant) + audio (seconds later)
    5. Unset =KOKORO_URL=, verify text-only still works
